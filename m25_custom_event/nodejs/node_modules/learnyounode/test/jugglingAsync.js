var bl = require('bl'),
    http = require('http'),
    index = 0,
    result = [],
    arr = process.argv.slice(2, process.argv.length);
arr.forEach(function (item) {
    var i = index;
    index ++;
    http.get(item, function (response) {
        response.setEncoding('utf8');
        response.pipe(bl(function (err, data) {
            if (err)
                return console.error(err);
            data = data.toString();
            result.push({
                index : i,
                data : data
            });
            if (result.length === arr.length) {
                result.sort(function (a, b) {
                    return a.index - b.index;
                });
                result.forEach(function (item) {
                    console.log(item.data);
                })
            }
        }));
    });
})